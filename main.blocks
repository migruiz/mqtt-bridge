<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="@2s^;e^f}Vw[3iu$r/Hz">counter</variable><variable id="81%xt;lX?x!^)*rEN~Lw">serialData</variable></variables><block type="pxt-on-start" id="Lm5+(J_xU,.q.zHA-L1}" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="6P*@E94?ldOt;|P:EN=@" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let counter = 0" numlines="1" declaredvars="counter"></mutation><next><block type="typescript_statement" id="%UDC(DWrwP]6PdgS.K.m" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const reportStatus = () =&gt;{" line1="    serial.writeLine(&quot;&quot; + (JSON.stringify({ type: 'mqtt', topic: 'tts', message: `${counter}` })))" line2="    basic.showString(`${counter}`)" line3="    basic.clearScreen()" line4="}" numlines="5" declaredvars="reportStatus"></mutation><next><block type="serial_redirect" id="6Ewh5|R2FSnZUH#~gnHi"><field name="tx">SerialPin.P12</field><field name="rx">SerialPin.P8</field><field name="rate">BaudRate.BaudRate115200</field></block></next></block></next></block></statement></block><block type="device_button_event" id=":_ZJ8xE`]fp-O:SM~kS|" x="959" y="20"><field name="NAME">Button.A</field><comment pinned="false" h="80" w="160">Output array</comment><statement name="HANDLER"><block type="variables_set" id="x!c{%_to7?%O@P%H63E,"><field name="VAR" id="@2s^;e^f}Vw[3iu$r/Hz">counter</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="D2m-y[mqCN8ujuA[-nj*"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=";K-Q4JCq?c4s:|gnU:0_"><field name="VAR" id="@2s^;e^f}Vw[3iu$r/Hz">counter</field></block></value><value name="B"><shadow type="math_number" id="u)4VvXLIO2usPW|Q-nOY"><field name="NUM">1</field></shadow></value></block></value><next><block type="typescript_statement" id="5Puh%kNPGh{Llmb6COBr" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="reportStatus();" numlines="1"></mutation></block></next></block></statement></block><block type="device_button_event" id="7E-Ih)SZ{0U-:m7*~#;E" x="1422" y="20"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="variables_set" id="_k7(@ynY25p/V#0+`9ya"><field name="VAR" id="@2s^;e^f}Vw[3iu$r/Hz">counter</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="j$x-G@bLkFXX[YoNi-qs"><field name="OP">ADD</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="b8JFWZsHMQIxTqT[m}y+"><field name="VAR" id="@2s^;e^f}Vw[3iu$r/Hz">counter</field></block></value><value name="B"><shadow type="math_number" id="!^-rdJ%J,]f8IcIP#Ma~"><field name="NUM">1</field></shadow></value></block></value><next><block type="typescript_statement" id="*lm)XT7K1[)dP.wVvOAw" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="reportStatus();" numlines="1"></mutation></block></next></block></statement></block><block type="input_logo_event" id="$(v)2z67K4FkY7}w(`}V" x="20" y="609"><field name="action">TouchButtonEvent.Pressed</field><statement name="HANDLER"><block type="serial_writeline" id="2qIG~/6fv+SUU:icQuC9"><value name="text"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="hxp^G$Fo5qxqB|ZylrDu" editable="false"><field name="EXPRESSION">(JSON.stringify({ type: 'mqtt', topic: 'tts', message: `My name is Miguel` }))</field></block></value><next><block type="basic_show_icon" id="jyNan4}!uv=var@7.M|F"><field name="i">IconNames.Heart</field><next><block type="device_clear_display" id="r]56TC7YxDtAIW?PLvb?"></block></next></block></next></block></statement></block><block type="serial_on_data_received" id="yX0=,[uxUfwb!2O:@E1F" x="962" y="609"><value name="delimiters"><shadow type="serial_delimiter_conv" id="M$A|r%6jGrEuFh1E`+P^"><field name="del">Delimiters.NewLine</field></shadow></value><statement name="HANDLER"><block type="variables_set" id=";Nd(Oa=+wx.(1D?-`i6;"><field name="VAR" id="81%xt;lX?x!^)*rEN~Lw">serialData</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="serial_read_until" id="yT:NV|b1d)Fk/$c_`A(U"><value name="delimiter"><shadow type="serial_delimiter_conv" id="iMT!EiaAZr#Oh=O~SPr)"><field name="del">Delimiters.NewLine</field></shadow></value></block></value><next><block type="controls_if" id="3X=XvD`:tl}mr*B_HZ9)"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=";UGNE$p!S}PL~Q(Ee.F9"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="`hM[vagF+p%`]3(RA+Yn"><field name="VAR" id="81%xt;lX?x!^)*rEN~Lw">serialData</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="L*Af]%;m*JffbSSyL~mh"><field name="TEXT">CONNECTED</field></block></value></block></value><statement name="DO0"><block type="basic_show_icon" id="hk}/(Phx;q5hLhObS{Tl"><field name="i">IconNames.Yes</field><next><block type="device_clear_display" id=".Qh^cn~[xjDAlMM+?!)P"></block></next></block></statement><statement name="ELSE"><block type="device_print_message" id=".6F5Q@Do}fILgPYxX/h6"><value name="text"><block type="variables_get" id="Q1QpsVp1*44KD#CwHC*i"><field name="VAR" id="81%xt;lX?x!^)*rEN~Lw">serialData</field></block></value><next><block type="device_clear_display" id="hZ*_Au~%vWOIC!49{Y3`"></block></next></block></statement></block></next></block></statement></block></xml>